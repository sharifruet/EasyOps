FROM maven:3.9-eclipse-temurin-21

WORKDIR /app

# Install curl for health checks
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

# Copy the entire project context
COPY . .

# Expose port
EXPOSE 8085

# Development command with hot reload
CMD ["mvn", "spring-boot:run", "-f", "services/organization-service/pom.xml", "-Dspring-boot.run.profiles=dev"]
